<div class="col-12">
  <h1 class="page-title">Announcements</h1>
</div>

<div class="col-9">
<% if @announcements.length == 0 %>
  <% if request.path.match(/announcements\/?$/) %>
  <p>There are no announcements :(</p>
  <% else %>
  <p>There aren't this many pages of announcements. <a href="/announcements">Go to the first page</a>.</p>
  <% end %>
<% else %>
  <% @announcements.each do |announcement| %>
  <div class='announcement'>
    <hgroup>
    <h1><%= announcement.title %></h1>
    <h2 class="author"><em>by</em> <%= announcement.user %></h2>
    <h3 class="date"><%= longdate(announcement.published_at || announcement.updated_at) %></h3>
    <h4><% if announcement.everyone %>
      'Everyone'
      <% else %>
      <%= list( announcement.sections, {:attribute => :name, :default => "all sections"}) %>
      <% end %>
    </h4>
    </hgroup>

    <div class="announcement-content">
    <%= mdown(announcement.content) %>
    </div>
  </div>
  <% end %>
<% end %>

<%= erb :'../../views/pagination', layout: false, locals: {collection: @announcements} %>
</div>

<div class="col-3">
  <%= erb :section_list, layout: false %>
</div>
